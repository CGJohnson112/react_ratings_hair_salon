{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/chrisjohnson/Sites/hair_salon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{FaStar}from'react-icons/fa';import'../ratings.css';export var Ratings=/*#__PURE__*/function(_Component){_inherits(Ratings,_Component);function Ratings(){var _getPrototypeOf2;var _this;_classCallCheck(this,Ratings);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Ratings)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:true,ratings:[]};return _this;}_createClass(Ratings,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,response,data,rateSum,numRatings,len,rater,i,avgRate,avgRateRounded,rating5,rating4,rating3,rating2,rating1;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"http://substyleprod.com/projects/APIS/ratings.json\";_context.next=3;return fetch(url);case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;this.setState({ratings:data,loading:false});rateSum=0;numRatings=0;len=data.length;rater=null;for(i=0;i<len;i++){rater=data[i];rateSum=data[i].rating+rateSum;numRatings=numRatings+1;}avgRate=rateSum/len;avgRateRounded=Math.round(avgRate);document.getElementById('avgNum').innerHTML=avgRateRounded;//get the number of ratings per each category, then fix the decimal to a percentage, then slice the decimal to transfor to \n//a whole number. Should add up to 100%\nrating5=data.filter(function(data){return data.rating===5;}).length/data.length;rating5=rating5.toFixed(2).slice(2);rating4=data.filter(function(data){return data.rating===4;}).length/data.length;;rating4=rating4.toFixed(2).slice(2);rating3=data.filter(function(data){return data.rating===3;}).length/data.length;;rating3=rating3.toFixed(2).slice(2);rating2=data.filter(function(data){return data.rating===2;}).length/data.length;;rating2=rating2.toFixed(2).slice(2);rating1=data.filter(function(data){return data.rating===1;}).length/data.length;;rating1=rating1.toFixed(2).slice(2);console.log(rating5);console.log(rating4);console.log(rating3);console.log(rating2);console.log(rating1);document.getElementById(\"demo\").style.width=rating5+\"%\";document.getElementById(\"demo2\").style.width=rating4+\"%\";document.getElementById(\"demo3\").style.width=rating3+\"%\";document.getElementById(\"demo4\").style.width=rating2+\"%\";document.getElementById(\"demo5\").style.width=rating1+\"%\";//console.log(rateSum)\n//console.log(avgRateRounded)\n//star rating average counter given from loop above\nif(avgRateRounded===1){document.getElementById(\"ping\").className=\"bar_1\";}else if(avgRateRounded===2){document.getElementById(\"ping\").className=\"bar_2\";}else if(avgRateRounded===3){document.getElementById(\"ping\").className=\"bar_3\";}else if(avgRateRounded===4){document.getElementById(\"ping\").className=\"bar_4\";}else if(avgRateRounded===5){document.getElementById(\"ping\").className=\"bar_5\";}case 41:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){if(this.state.loading){return React.createElement(\"div\",{className:\"textBox\"},\"...loading reviews...please wait....\");}if(!this.state.ratings.length){return React.createElement(\"div\",{className:\"textBox\"},\"No one's commenting! Be the first!\");}return React.createElement(\"div\",{className:\"textBox\"},React.createElement(\"a\",{name:\"ratings\"}),React.createElement(\"hr\",null),React.createElement(\"h3\",null,\"Ratings\"),React.createElement(\"span\",{className:\"heading\"},\"User Rating\"),React.createElement(\"h5\",null,React.createElement(\"span\",{id:\"ping\",className:\"bar_1\"})),React.createElement(\"p\",null,React.createElement(\"span\",{id:\"avgNum\"}),\" star average based on \",this.state.ratings.length,\"  reviews.\"),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"progress\"},React.createElement(\"span\",null,\"5 star \"),React.createElement(\"div\",{id:\"demo\",className:\"bar\",style:{width:\"100%\"}},\"\\xA0\"),\"\\xA0\"),React.createElement(\"div\",{className:\"progress\"},React.createElement(\"span\",null,\"4 star \"),React.createElement(\"div\",{id:\"demo2\",className:\"bar\",style:{width:\"14%\"}},\"\\xA0\"),\"\\xA0\"),React.createElement(\"div\",{className:\"progress\"},React.createElement(\"span\",null,\"3 star \"),React.createElement(\"div\",{id:\"demo3\",className:\"bar\",style:{width:\"14%\"}},\"\\xA0\"),\"\\xA0\"),React.createElement(\"div\",{className:\"progress\"},React.createElement(\"span\",null,\"2 star \"),React.createElement(\"div\",{id:\"demo4\",className:\"bar\",style:{width:\"14%\"}},\"\\xA0\"),\"\\xA0\"),React.createElement(\"div\",{className:\"progress\"},React.createElement(\"span\",null,\"1 star \"),React.createElement(\"div\",{id:\"demo5\",className:\"bar\",style:{width:\"43%\"}},\"\\xA0\"),\"\\xA0\")),React.createElement(\"hr\",null),React.createElement(React.Fragment,null,this.state.ratings.map(function(rating){return React.createElement(\"div\",{className:\"textBox\",key:rating.id},React.createElement(\"h5\",null,React.createElement(\"span\",{className:\"bar_\".concat(rating.rating)})),React.createElement(\"h6\",null,rating.header),React.createElement(\"p\",null,rating.comment),React.createElement(\"p\",null,rating.name,\" - \",rating.date),React.createElement(\"hr\",null));})));}}]);return Ratings;}(Component);export default Ratings;","map":{"version":3,"sources":["/Users/chrisjohnson/Sites/hair_salon/src/components/Ratings.js"],"names":["React","Component","FaStar","Ratings","state","loading","ratings","url","fetch","response","json","data","setState","rateSum","numRatings","len","length","rater","i","rating","avgRate","avgRateRounded","Math","round","document","getElementById","innerHTML","rating5","filter","toFixed","slice","rating4","rating3","rating2","rating1","console","log","style","width","className","map","id","header","comment","name","date"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport {FaStar} from 'react-icons/fa'\nimport '../ratings.css'\n\nexport class Ratings extends Component {\n\n    state = {\n        loading: true,\n        ratings: []\n    };\n\n    async componentDidMount(){\n        const url = \"http://substyleprod.com/projects/APIS/ratings.json\";\n        const response = await fetch(url);\n        const data = await response.json();\n        \n        this.setState({ratings: data, loading: false})\n        \n        let rateSum = 0;\n        let numRatings = 0;\n        const len = data.length;\n        let rater = null;\n        for (let i = 0; i < len; i++) {\n            rater = data[i];\n            rateSum = data[i].rating + rateSum;\n            numRatings = numRatings + 1;     \n        }\n\n        \n    \n        \n        const avgRate = rateSum / len;\n        let avgRateRounded =  Math.round(avgRate);\n        document.getElementById('avgNum').innerHTML = avgRateRounded;\n\n        //get the number of ratings per each category, then fix the decimal to a percentage, then slice the decimal to transfor to \n        //a whole number. Should add up to 100%\n        let rating5 = data.filter(data => data.rating === 5).length / data.length;\n        rating5 = rating5.toFixed(2).slice(2);\n        let rating4 = data.filter(data => data.rating === 4).length / data.length;;\n        rating4 = rating4.toFixed(2).slice(2);\n        let rating3 = data.filter(data => data.rating === 3).length / data.length;;\n        rating3 = rating3.toFixed(2).slice(2);\n        let rating2 = data.filter(data => data.rating === 2).length / data.length;;\n        rating2 = rating2.toFixed(2).slice(2);\n        let rating1 = data.filter(data => data.rating === 1).length / data.length;;\n        rating1 = rating1.toFixed(2).slice(2);\n\n        console.log(rating5);\n        console.log(rating4);\n        console.log(rating3);\n        console.log(rating2);\n        console.log(rating1);\n        document.getElementById(\"demo\").style.width = rating5 + \"%\";\n        document.getElementById(\"demo2\").style.width = rating4 + \"%\";\n        document.getElementById(\"demo3\").style.width = rating3 + \"%\";\n        document.getElementById(\"demo4\").style.width = rating2 + \"%\";\n        document.getElementById(\"demo5\").style.width = rating1 + \"%\";\n        \n        //console.log(rateSum)\n        //console.log(avgRateRounded)\n\n\n        //star rating average counter given from loop above\n        if (avgRateRounded === 1) {\n            document.getElementById(\"ping\").className = \"bar_1\";\n        } else if (avgRateRounded === 2) {\n            document.getElementById(\"ping\").className = \"bar_2\";\n        } else if (avgRateRounded === 3) {\n            document.getElementById(\"ping\").className = \"bar_3\";\n        } else if (avgRateRounded === 4) {\n            document.getElementById(\"ping\").className = \"bar_4\";\n        }  else if (avgRateRounded === 5) {\n           document.getElementById(\"ping\").className = \"bar_5\";\n        }  \n        \n    }\n \n    render() {\n        if (this.state.loading) {\n            return <div className=\"textBox\">...loading reviews...please wait....</div>\n        }\n\n        if(!this.state.ratings.length) {\n            return <div className=\"textBox\">No one's commenting! Be the first!</div>\n        }\n        \n        return (\n            \n            <div className=\"textBox\">\n            \n            <a name=\"ratings\"></a>\n            <hr/>\n                <h3>Ratings</h3>\n                    \n                <span className=\"heading\">User Rating</span>\n                \n                <h5><span id=\"ping\" className=\"bar_1\"></span></h5>\n                <p><span id=\"avgNum\"></span> star average based on {this.state.ratings.length}  reviews.</p>\n               \n                <div className=\"row\">\n                \n                        <div className=\"progress\">\n                            <span>5 star </span><div id=\"demo\" className=\"bar\" style={{width:\"100%\"}}>&nbsp;</div> \n                            &nbsp;\n                        </div>    \n\n                        <div className=\"progress\">\n                        <span>4 star </span><div id=\"demo2\"  className=\"bar\" style={{width:\"14%\"}}>&nbsp;</div> \n                            &nbsp;\n                        </div>    \n                        <div className=\"progress\">\n                        <span>3 star </span><div id=\"demo3\" className=\"bar\" style={{width:\"14%\"}}>&nbsp;</div> \n                            &nbsp;\n                        </div>    \n                        <div className=\"progress\">\n                        <span>2 star </span><div id=\"demo4\" className=\"bar\" style={{width:\"14%\"}}>&nbsp;</div> \n                            &nbsp;\n                        </div>    \n                        <div className=\"progress\">\n                        <span>1 star </span><div id=\"demo5\" className=\"bar\" style={{width:\"43%\"}}>&nbsp;</div> \n                            &nbsp;\n                        </div>     \n\n                        \n        \n\n\n                \n               </div>\n            <hr/>\n            \n                \n\n            <>\n            {this.state.ratings.map(rating => (\n            <div className=\"textBox\" key={rating.id}>\n            \n            <h5><span className={`bar_${rating.rating}`}></span></h5>\n            \n            \n            <h6>{rating.header}</h6>\n            <p>{rating.comment}</p>\n            <p>{rating.name} - {rating.date}</p>\n            <hr />\n            </div>\n\n            ))}\n            </>\n            </div>\n        )\n    }\n}\n\nexport default Ratings\n"]},"metadata":{},"sourceType":"module"}