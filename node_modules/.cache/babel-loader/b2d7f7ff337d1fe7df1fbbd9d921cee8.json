{"ast":null,"code":"var _jsxFileName = \"/Users/chrisjohnson/Sites/hair_salon/src/components/Ratings.js\";\nimport React, { Component } from 'react';\nimport { Progress } from 'bootstrap-4-react';\nimport { FaStar } from 'react-icons/fa';\nimport '../ratings.css';\nexport class Ratings extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      ratings: []\n    };\n  }\n\n  async componentDidMount() {\n    const url = \"http://substyleprod.com/projects/APIS/ratings.json\";\n    const response = await fetch(url);\n    const data = await response.json();\n    this.setState({\n      ratings: data,\n      loading: false\n    });\n    let rateSum = 0;\n    let numRatings = 0;\n    const len = data.length;\n    let rater = null;\n\n    for (let i = 0; i < len; i++) {\n      rater = data[i];\n      rateSum = data[i].rating + rateSum;\n      numRatings = numRatings + 1;\n    }\n\n    const avgRate = rateSum / len;\n    let avgRateRounded = Math.round(avgRate);\n    document.getElementById('avgNum').innerHTML = avgRateRounded; //get the number of ratings per each category, then fix the decimal to a percentage, then slice the decimal to transfor to \n    //a whole number. Should add up to 100%\n\n    let rating5 = data.filter(data => data.rating === 5).length / data.length;\n    rating5 = rating5.toFixed(2).slice(2);\n    let rating4 = data.filter(data => data.rating === 4).length / data.length;\n    ;\n    rating4 = rating4.toFixed(2).slice(2);\n    let rating3 = data.filter(data => data.rating === 3).length / data.length;\n    ;\n    rating3 = rating3.toFixed(2).slice(2);\n    let rating2 = data.filter(data => data.rating === 2).length / data.length;\n    ;\n    rating2 = rating2.toFixed(2).slice(2);\n    let rating1 = data.filter(data => data.rating === 1).length / data.length;\n    ;\n    rating1 = rating1.toFixed(2).slice(2);\n    console.log(rating5);\n    console.log(rating4);\n    console.log(rating3);\n    console.log(rating2);\n    console.log(rating1); //document.getElementById(\"demo\").innerHTML = rating5;\n    //document.getElementById(\"demo2\").innerHTML =  rating4;\n    //document.getElementById(\"demo3\").innerHTML = rating3;\n    //document.getElementById(\"demo4\").innerHTML = rating2;\n    //document.getElementById(\"demo5\").innerHTML = rating1;\n    //console.log(rateSum)\n    //console.log(avgRateRounded)\n    //star rating average counter given from loop above\n\n    if (avgRateRounded === 1) {\n      document.getElementById(\"ping\").className = \"bar_1\";\n    } else if (avgRateRounded === 2) {\n      document.getElementById(\"ping\").className = \"bar_2\";\n    } else if (avgRateRounded === 3) {\n      document.getElementById(\"ping\").className = \"bar_3\";\n    } else if (avgRateRounded === 4) {\n      document.getElementById(\"ping\").className = \"bar_4\";\n    } else if (avgRateRounded === 5) {\n      document.getElementById(\"ping\").className = \"bar_5\";\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return React.createElement(\"div\", {\n        className: \"textBox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"...loading reviews...please wait....\");\n    }\n\n    if (!this.state.ratings.length) {\n      return React.createElement(\"div\", {\n        className: \"textBox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"No one's commenting! Be the first!\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"textBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      name: \"ratings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Ratings\"), React.createElement(\"span\", {\n      className: \"heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"User Rating\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      id: \"ping\",\n      className: \"bar_1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      id: \"avgNum\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), \" star average based on \", this.state.ratings.length, \"  reviews.\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(React.Fragment, null, this.state.ratings.map(rating => React.createElement(\"div\", {\n      className: \"textBox\",\n      key: rating.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: `bar_${rating.rating}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, rating.header), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, rating.comment), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, rating.name, \" - \", rating.date), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })))));\n  }\n\n}\nexport default Ratings;","map":{"version":3,"sources":["/Users/chrisjohnson/Sites/hair_salon/src/components/Ratings.js"],"names":["React","Component","Progress","FaStar","Ratings","state","loading","ratings","componentDidMount","url","response","fetch","data","json","setState","rateSum","numRatings","len","length","rater","i","rating","avgRate","avgRateRounded","Math","round","document","getElementById","innerHTML","rating5","filter","toFixed","slice","rating4","rating3","rating2","rating1","console","log","className","render","map","id","header","comment","name","date"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Progress } from 'bootstrap-4-react';\nimport {FaStar} from 'react-icons/fa'\nimport '../ratings.css'\n\nexport class Ratings extends Component {\n\n    state = {\n        loading: true,\n        ratings: []\n    };\n\n    async componentDidMount(){\n        const url = \"http://substyleprod.com/projects/APIS/ratings.json\";\n        const response = await fetch(url);\n        const data = await response.json();\n        \n        this.setState({ratings: data, loading: false})\n        \n        let rateSum = 0;\n        let numRatings = 0;\n        const len = data.length;\n        let rater = null;\n        for (let i = 0; i < len; i++) {\n            rater = data[i];\n            rateSum = data[i].rating + rateSum;\n            numRatings = numRatings + 1;     \n        }\n\n        \n    \n        \n        const avgRate = rateSum / len;\n        let avgRateRounded =  Math.round(avgRate);\n        document.getElementById('avgNum').innerHTML = avgRateRounded;\n\n        //get the number of ratings per each category, then fix the decimal to a percentage, then slice the decimal to transfor to \n        //a whole number. Should add up to 100%\n        let rating5 = data.filter(data => data.rating === 5).length / data.length;\n        rating5 = rating5.toFixed(2).slice(2);\n        let rating4 = data.filter(data => data.rating === 4).length / data.length;;\n        rating4 = rating4.toFixed(2).slice(2);\n        let rating3 = data.filter(data => data.rating === 3).length / data.length;;\n        rating3 = rating3.toFixed(2).slice(2);\n        let rating2 = data.filter(data => data.rating === 2).length / data.length;;\n        rating2 = rating2.toFixed(2).slice(2);\n        let rating1 = data.filter(data => data.rating === 1).length / data.length;;\n        rating1 = rating1.toFixed(2).slice(2);\n\n        console.log(rating5);\n        console.log(rating4);\n        console.log(rating3);\n        console.log(rating2);\n        console.log(rating1);\n        //document.getElementById(\"demo\").innerHTML = rating5;\n        //document.getElementById(\"demo2\").innerHTML =  rating4;\n        //document.getElementById(\"demo3\").innerHTML = rating3;\n        //document.getElementById(\"demo4\").innerHTML = rating2;\n        //document.getElementById(\"demo5\").innerHTML = rating1;\n        //console.log(rateSum)\n        //console.log(avgRateRounded)\n\n\n        //star rating average counter given from loop above\n        if (avgRateRounded === 1) {\n            document.getElementById(\"ping\").className = \"bar_1\";\n        } else if (avgRateRounded === 2) {\n            document.getElementById(\"ping\").className = \"bar_2\";\n        } else if (avgRateRounded === 3) {\n            document.getElementById(\"ping\").className = \"bar_3\";\n        } else if (avgRateRounded === 4) {\n            document.getElementById(\"ping\").className = \"bar_4\";\n        }  else if (avgRateRounded === 5) {\n           document.getElementById(\"ping\").className = \"bar_5\";\n        }  \n        \n    }\n \n    render() {\n        if (this.state.loading) {\n            return <div className=\"textBox\">...loading reviews...please wait....</div>\n        }\n\n        if(!this.state.ratings.length) {\n            return <div className=\"textBox\">No one's commenting! Be the first!</div>\n        }\n        \n        return (\n            \n            <div className=\"textBox\">\n            \n            <a name=\"ratings\"></a>\n            <hr/>\n                <h3>Ratings</h3>\n                    \n                <span className=\"heading\">User Rating</span>\n                \n                <h5><span id=\"ping\" className=\"bar_1\"></span></h5>\n                <p><span id=\"avgNum\"></span> star average based on {this.state.ratings.length}  reviews.</p>\n               \n                <div className=\"row\">\n               \n\n\n\n\n\n\n\n\n                \n            </div>\n            <hr/>\n            \n                \n\n            <>\n            {this.state.ratings.map(rating => (\n            <div className=\"textBox\" key={rating.id}>\n            \n            <h5><span className={`bar_${rating.rating}`}></span></h5>\n            \n            \n            <h6>{rating.header}</h6>\n            <p>{rating.comment}</p>\n            <p>{rating.name} - {rating.date}</p>\n            <hr />\n            </div>\n\n            ))}\n            </>\n            </div>\n        )\n    }\n}\n\nexport default Ratings\n"]},"metadata":{},"sourceType":"module"}